<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="/css/home.css">
</head>

<div class="card">
    <div class="table-title">
        <h2>TABLICA GLJIVA</h2>
    </div>

    <div class="table-concept"><input class="table-radio" type="radio" name="table_radio" id="table_radio_0"
            checked="checked" />


        <% for(var i=0; i < pageCount; i++) { %>

            <div class="table-display">Showing <%= i * perPage + 1 %> to <%= Math.min(i * perPage + perPage, itemsCount)
                        %>
                        of <%= itemsCount %> items</div>

            <table>
                <thead>
                    <tr>
                        <th></th>
                        <th>
                            <p class="p-header">Znanstveni naziv</p>
                            <input type="text" name="ZnanstveniNaziv" value="<%=value%>"  placeholder="Pretraži...">
                        </th>
                        <th>
                            <p class="p-header">Porodica</p>
                            <input type="text" name="drugi" placeholder="Pretraži...">
                        </th>
                        <th>
                            <p class="p-header">Rod</p>
                            <input type="text" name="prvi" placeholder="Pretraži...">
                        </th>
                        <th>
                            <p class="p-header">Vrsta</p>
                            <input type="text" name="prvi" placeholder="Pretraži...">
                        </th>
                        <th>
                            <p class="p-header">Opis</p>

                        </th>
                        <th>
                            <p class="p-header">Klobuk opis</p>

                        </th>
                        <th>
                            <p class="p-header">Listići opis</p>

                        </th>
                        <th>
                            <p class="p-header">Stručak opis</p>

                        </th>
                        <th>
                            <p class="p-header">Boja otrusine</p>

                        </th>
                        <th>
                            <p class="p-header">Slika</p>

                        </th>
                        <th>
                            <p class="p-header">Jestivost</p>

                        </th>
                        <th>
                            <p class="p-header">Sezona rasta</p>

                        </th>
                        <th>
                            <p class="p-header">Stanište</p>

                        </th>
                        <th>
                            <p class="p-header">Simbioza sa</p>

                        </th>
                    </tr>
                </thead>

                <tbody>
                    <!--That means we are on last page-->
                    <% if(i+1===pageCount) { %>
                        <% for(var j=0; j < lastPageCount; j++) { %>
                            <tr>
                                <td><input type="checkbox" /></td>

                                <td>
                                    <%= rows[i * perPage + j ].ZnanstveniNaziv %>
                                </td>
                                <td>
                                    <%= rows[i * perPage + j ].Porodica %>
                                </td>
                                <td>
                                    <%= rows[i * perPage + j ].Rod %>
                                </td>
                                <td>
                                    <%= rows[i * perPage + j ].Vrsta %>
                                </td>
                                <td>
                                    <%= rows[i * perPage + j ].Opis %>
                                </td>
                                <td>
                                    <%= rows[i * perPage + j ].KlobukOpis %>
                                </td>
                                <td>
                                    <%= rows[i * perPage + j ].ListiciOpis %>
                                </td>
                                <td>
                                    <%= rows[i * perPage + j ].StrucakOpis %>
                                </td>
                                <td>
                                    <%= rows[i * perPage + j ].BojaOtrusine %>
                                </td>
                                <td>
                                    <%= rows[i * perPage + j ].Slika %>
                                </td>
                                <td>
                                    <%= rows[i * perPage + j ].Jestivost %>
                                </td>
                                <td>
                                    <%= rows[i * perPage + j ].SezonaRasta %>
                                </td>
                                <td>
                                    <%= rows[i * perPage + j ].Staniste %>
                                </td>
                                <td>
                                    <%= rows[i * perPage + j ].SimbiozaSa %>
                                </td>
                            </tr>
                            <% } %>
                                <% } else { %>
                                    <% for(var j=0; j < perPage; j++) { %>
                                        <tr>
                                            <td><input type="checkbox" /></td>

                                            <td>
                                                <%= rows[i * perPage + j ].ZnanstveniNaziv %>
                                            </td>
                                            <td>
                                                <%= rows[i * perPage + j ].Porodica %>
                                            </td>
                                            <td>
                                                <%= rows[i * perPage + j ].Rod %>
                                            </td>
                                            <td>
                                                <%= rows[i * perPage + j ].Vrsta %>
                                            </td>
                                            <td>
                                                <%= rows[i * perPage + j ].Opis %>
                                            </td>
                                            <td>
                                                <%= rows[i * perPage + j ].KlobukOpis %>
                                            </td>
                                            <td>
                                                <%= rows[i * perPage + j ].ListiciOpis %>
                                            </td>
                                            <td>
                                                <%= rows[i * perPage + j ].StrucakOpis %>
                                            </td>
                                            <td>
                                                <%= rows[i * perPage + j ].BojaOtrusine %>
                                            </td>
                                            <td>
                                                <%= rows[i * perPage + j ].Slika %>
                                            </td>
                                            <td>
                                                <%= rows[i * perPage + j ].Jestivost %>
                                            </td>
                                            <td>
                                                <%= rows[i * perPage + j ].SezonaRasta %>
                                            </td>
                                            <td>
                                                <%= rows[i * perPage + j ].Staniste %>
                                            </td>
                                            <td>
                                                <%= rows[i * perPage + j ].SimbiozaSa %>
                                            </td>
                                        </tr>
                                        <% } %>
                                            <% } %>



                </tbody>
            </table>
            <div class="pagination">
                <label for="table_radio_<%= forPagination + i%>">&laquo; Previous</label>
                <% for(var k=0; k < pageCount; k++) { %>
                    <label for="table_radio_<%= k %>" id="table_pager_<%= k %>">
                        <%= k+1 %>
                    </label>
                    <% } %>
                        <% if(i+1 !==pageCount) { %>
                            <label for="table_radio_<%= i+1 %>">Next &raquo;</label>
                            <% } %>

            </div>
            <input class="table-radio" type="radio" name="table_radio" id="table_radio_<%= i+1 %>" />

            <% } %>













    </div>
</div>

</html>

<script>
   

    //let ZnanstveniNazivValue = '';

    /* event listener */
    document.getElementsByName("ZnanstveniNaziv").forEach( el => {
        el.addEventListener('keyup', doThing);
       
        
    })

    console.log(document.getElementsByName('ZnanstveniNaziv')[0]);
    document.getElementsByName('ZnanstveniNaziv')[0].focus();


    /* function */
    function doThing() {
        setTimeout(() => {window.location.reload()}, 1000);
       
        //ZnanstveniNazivValue = this.value;
        //alert('Horray! Someone wrote "' + this.value + '"!');
        fetch("/post", {
            method: "POST",
            body: JSON.stringify({
                property: 'ZnanstveniNaziv',
                searchText: this.value
            }),
            headers: {
                "Content-type": "application/json"
            }
        })
    }
</script>